## レンダリング
Next.js は、デフォルトではすべてのページを事前にレンダリング。  
つまり Next.js は、すべてをクライアント側の JavaScript で実行するのではなく、各ページの HTML を事前に生成する。  
この**プレレンダリング**により、パフォーマンスと SEO が向上する可能性がある。

生成された各 HTML は、そのページに必要な最小限の JavaScript コードに関連付けられている。  
ページがブラウザによって読み込まれると、その JavaScript コードが実行され、ページが完全にインタラクティブとなる。  
（このプロセスを**hydration**と呼ぶ）

また、ブラウザ側で JavaScript が無効になっていたとしてもページの表示ができる（ただし localhost では CSS が読み込まれない）  
通常の React アプリケーションではプレレンダリングが行われないため、無効になっているアプリの表示ができない。

### プレレンダリングの種類
Next.js ではプレレンダリングの形式として、以下の2つがある。
- Static Generation
- Server-side Rendering

**※開発モード（`$ npm run dev`または`$ yarn dev`を実行する場合）では、静的生成を使用するページであっても、すべてのページがリクエストごとに事前にレンダリングされる。**

Next.js においては、各ページで使用するプレレンダリングの形式を選択できるため、SSG を基本としながら、必要なページだけ SSR ということが可能。

なお、ページは一度作成して CDN で提供できるため、可能な限り SSG（データありとなし）使用を推奨。  
これにより、サーバがすべてのリクエストでページをレンダリングするよりもはるかに高速になる。

#### Static Generation
ビルド時に HTML を生成する事前レンダリング方法。  
事前にレンダリングされた HTML は、リクエストごとに再利用される。

SSG に向くページ
- マーケティングページ
- ブログ記事ページ
- Eコマース製品リストページ
- ヘルプやドキュメントページ

コンテンツが頻繁に更新されるなど、ユーザーのリクエストの前にページを事前にレンダリングできないという場合は、あまり向かない。

なお、事前にデータ取得が必要な場合、必要ない場合どちらにも対応できる。

#### Server-side Rendering
リクエストごとに HTML を生成する事前レンダリング方法。

SSG と比べると速度は落ちるが、常に最新の状態のページになるため、コンテンツが頻繁に更新されるなどの場合に有効。  
または、事前レンダリングをスキップし、クライアント側のJavaScript を使用して、頻繁に更新されるデータを入力することも可能。

### Client-side Rendering
データを事前にレンダリングする必要がない場合は、この方法も使用できる。
- 外部データを必要としないページの部分を静的に生成（事前レンダリング）
- ページが読み込まれたら、JavaScript を使用してクライアントから外部データを取得し、残りの部分にデータを入力

この方法はユーザーのダッシュボードページに適していている。  
ダッシュボードは非公開のユーザー固有のページであるため、SEO は関係なく、ページを事前にレンダリングする必要がないため。  
また、データは頻繁に更新されるため、要求時のデータフェッチが必要となる。

この方法を使用する場合のデータ取得に関しては、Next.js のチームが作成した SWR というデータ取得用の React Hooks を使うとよい。