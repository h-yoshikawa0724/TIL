---
id: git-cli-basic
title: 基本操作コマンド
sidebar_label: 基本操作コマンド
description: Gitの基本操作コマンドページ
keywords:
  - Git
---

- 検証バージョン：git version 2.25.0.windows.1

## ファイル変更内容の確認
```bash
$ git diff ファイル名

$ git diff --staged ファイル名 # git addした部分の差分を表示
```
変更前のコードは`-`がつき赤で表示される。  
変更後のコードは`+`がつき緑で表示される。

## ファイルの変更状況やステージングの状態確認
```bash
$ git status
```
ステージングにないものは赤で、あるものは緑で表示される。

## 自分の作業内容をアップする
### ファイルをステージングにアップ
ファイル名にはワイルドカードなども指定可能。
```bash
$ git add ファイルパス
```

### コミット
コミットすることでローカルリポジトリに記録される。

#### ステージングにあるファイルをコミット
```bash
$ git commit -m "コミットメッセージ" # コミットメッセージも指定してコミット
```

#### 直前のコミットの修正
```bash
$ git commit --amend # 直前のコミットを取り消す
$ git commit --amend -m "修正コミットメッセージ" # 直前のコミットのコミットメッセージを修正
```

### push
#### ローカルリポジトリの記録をリモートリポジトリにアップ
pushすることで、ローカルリポジトリにコミットされた内容がリモートリポジトリに反映される。  
リモート名のデフォルトは`origin`。
```bash
$ git push リモート名 ブランチ名
```

#### 強制的に上書きするpush
一度pushしたコミットを変更して再度pushすると、変更履歴の違いから通常はエラーになる。そのエラーを無視して上書きするpushをしたい時に使用する。
**不用意に使わないことを推奨。**
```bash
$ git push -f リモート名 ブランチ名
```

## 他の人の作業内容や他ブランチの履歴情報を取り込む
### リモートリポジトリの履歴情報を取得
```bash
$ git fetch リモート名 # リモートリポジトリの履歴情報を取得
$ git fetch リモート名 ブランチ名 # 指定ブランチの履歴情報のみ取得
```

### 他のブランチの履歴情報を結合
指定したブランチを現在のブランチに結合する。  
こちらではマージコミットが作成される。
```bash
$ git merge ブランチ名
```

### 他のブランチの履歴情報を取り込み履歴情報を書き換える
指定したブランチを現在のブランチに取り込む。  
取り込んだブランチのコミットが自ブランチのコミットの親コミットになるイメージ。
`git merge`と違い、こちらではマージコミットは作成されない。
```bash
$ git rebase ブランチ名
```

### リモートリポジトリの履歴情報を取得 + 結合
`--rebase`オプションをつけることで`git rebase`方式にできるが、設定の`pull.rebase`をtrueにすることで、デフォルトをリベース方式にすることも可能。
```bash
$ git pull リモート名 ブランチ名 # git fetch + git merge となりマージコミットが作成される

$ git pull --rebase リモート名 ブランチ名 # git fetch + git rebase となりマージコミットが作成されない
```

## その他ファイル操作
### 一時退避
後入れ先出し方式の操作。  
参考：[Qiita - 色々な git stash](https://qiita.com/akasakas/items/768c0b563b96f8a9be9d)

#### ファイルの変更を一時退避
```bash
$ git stash save # 一時退避

$ git stash save "メッセージ" # メッセージ付きで一時退避
```

#### 一時退避した履歴の確認
`show`で指定する履歴の番号は`list`で確認できる番号になる。
```bash
$ git stash list # 一時退避した履歴一覧の確認

$ git stash show N # N番目に退避した内容の変更ファイルを確認

$ git stash show -p N # N番目に退避した内容の変更ファイル差分を確認
```

#### 退避した内容の復元
```bash
$ git stash pop # 最新の退避した内容を復元（退避履歴を削除）
$ git stash pop N # N番目に退避した内容を復元（退避履歴を削除）

$ git stash apply # 最新の退避した内容を復元（退避履歴は削除しない）
$ git stash apply N # N番目に退避した内容を復元（退避履歴は削除しない）
```

#### 退避した履歴の削除
```bash
$ git stash drop # 最新の退避した内容を削除
$ git stash drop N # N番目に退避した内容を削除

$ git stash clear # 前退避履歴の削除
```

### ファイルの状態を戻す
コミットIDを指定しないと直前のコミットの状態に戻す。
```bash
$ git restore ファイル名

$ git checkout ファイル名 # 旧式

$ git restore --source コミットID ファイル名 # 指定コミットでの状態に戻す
```

### ファイルの移動 + ステージングにアップ
ファイル名の変更としても使用できる。
```bash
$ git mv 旧ファイル 新ファイル
```
ちなみにこのコマンドは以下のコマンドと同様の動きをする。
```bash
$ mv 旧ファイル 新ファイル
$ git rm 旧ファイル
$ git add 新ファイル
```

### ファイルの削除 + ステージングにアップ
```bash
$ git rm ファイル名 # ローカルリポジトリおよびワークツリーからファイルを削除

$ git rm -r ディレクトリ名 # ローカルリポジトリおよびワークツリーからディレクトリとファイルを削除

$ git rm --cached ファイル名 # ローカルリポジトリからのみファイル削除
# addやcommitしてしまったファイルを除外するのに使用）
```

### ステージングのアップの取り消し
```bash
$ git restore --staged ステージングのファイル名

$ git reset ステージングのファイル名
```

## その他コミット操作
### コミットの取り消し
```bash
$ git reset --soft HEAD^ # 直前のコミットの取り消し（ワークツリーのファイル状態には影響しない）

$ git reset --hard HEAD^ # 直前のコミットの取り消し（ワークツリーのファイル状態を前のコミットの状態に戻す）
```

### コミット履歴の確認
```bash
$ git log
```